---
// src/components/Sidebar.astro
import avatarUrl from "../assets/my head.jpg"; 
const pathname = Astro.url.pathname;
const isActive = (href) =>
  pathname === href || (href !== "/blog" && pathname.startsWith(`${href}/`));
---

<div class="sidebar-container">
  
  <div class="glass-card profile">
    <div class="avatar-wrapper">
      <img src={avatarUrl.src} alt="头像" class="avatar" />
    </div>
    <h2 class="name">Shiyuu</h2>
    <p class="bio">嘤嘤嘤.</p>
    

  </div>

  <div class="glass-card menu">
    <a href="/main" class={`menu-item ${isActive("/main") ? "active" : ""}`}>
      <span class="icon"><i class="fa-solid fa-house"></i></span> 
      <span class="text">主页</span>
    </a>
    <a href="/blog" class={`menu-item ${isActive("/blog") ? "active" : ""}`}>
      <span class="icon"><i class="fa-solid fa-layer-group"></i></span> 
      <span class="text">全部文章</span>
    </a>
    <a href="/blog/summary" class={`menu-item ${isActive("/blog/summary") ? "active" : ""}`}>
      <span class="icon"><i class="fa-solid fa-archive"></i></span> 
      <span class="text">总结</span>
    </a>
    <a href="/blog/talk" class={`menu-item ${isActive("/blog/talk") ? "active" : ""}`}>
      <span class="icon"><i class="fa-solid fa-feather"></i></span> 
      <span class="text">随想</span>
    </a>
    <a href="/blog/study" class={`menu-item ${isActive("/blog/study") ? "active" : ""}`}>
      <span class="icon"><i class="fa-solid fa-pen"></i></span> 
      <span class="text">学习</span>
    </a>
    <a href="/blog/creation" class={`menu-item ${isActive("/blog/creation") ? "active" : ""}`}>
      <span class="icon"><i class="fa-solid fa-palette"></i></span> 
      <span class="text">创作
      </span>
    </a>
    <a href="/blog/record" class={`menu-item ${isActive("/blog/record") ? "active" : ""}`}>
      <span class="icon"><i class="fa-solid fa-book"></i></span> 
      <span class="text">记录
      </span>
    </a>
  </div>


</div>

<style>
  /* 容器布局 */
  .sidebar-container {
     font-size: 1.1rem;
    padding: 1.2rem;
    display: flex;
    flex-direction: column;
    gap: 1rem; /* 卡片之间的间距 */
    height: 100%;
    min-height: 0;
    box-sizing: border-box;
  }

  /* --- 核心样式：毛玻璃卡片 --- */
  .glass-card {
    /* 半透明白色背景 */
    background: rgba(255, 255, 255, 0.6); 
    /* 核心：背景模糊效果 */
    backdrop-filter: blur(12px); 
    -webkit-backdrop-filter: blur(12px); /* 兼容 Safari */
    
    border-radius: 16px; /* 圆角 */
    border: 1px solid rgba(255, 255, 255, 0.3); /* 微微发光的边框 */
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1); /* 柔和阴影 */
    padding: 0.7rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: transform 0.3s ease;
  }



  /* --- 个人资料样式 --- */
  .avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%; /* 圆形头像 */
    object-fit: cover;
    border: 3px solid rgba(255, 255, 255, 0.8);
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);   
    margin-top: 0.5rem;
  }
  .avatar-wrapper { margin-top: 0.5rem; }

  .name {
    margin-top: 0.5rem;
    font-size: 1.25rem;
    font-weight: bold;
    color: #333;
    margin-bottom: 0.2rem;
  }

  .bio {
    font-size: 0.85rem;
    color: #666;
    margin-bottom: 0.2rem;
    text-align: center;
  }



  .stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
  }
  
  .stat-item .count { font-weight: bold; color: #2a82f0; }
  .stat-item .label { font-size: 0.75rem; color: #888; }

  /* --- 菜单样式 --- */
  .menu {
    align-items: stretch; /* 让子元素占满宽度 */
    padding: 1rem;
    flex: 1;
    overflow: auto;
  }

  .menu::-webkit-scrollbar {
    display: none;
  }

  .menu {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .menu-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 6px 8px;
    margin-bottom: 8px;
    text-decoration: none;
    color: #555;
    border-radius: 12px;
    transition: all 0.2s;
    font-weight: 500;
  }

  .menu-item:hover {
    background: rgba(255, 255, 255, 0.6);
    color: #2a82f0;
  }

  /* 激活状态（蓝色背景） */
  .menu-item.active {
    background: #2a82f0;
    color: white;
    box-shadow: 0 4px 10px rgba(42, 130, 240, 0.3);
  }

  /* --- 底部图标栏 --- */
  .footer-actions {
    flex-direction: row;
    justify-content: space-around;
    padding: 1rem;
    margin-top: auto; /* 推到底部 */
  }
  
  .icon-btn {
    text-decoration: none;
    font-size: 1.2rem;
    opacity: 0.7;
    transition: 0.2s;
  }
  
  .icon-btn:hover { opacity: 1; transform: scale(1.1); }

</style>
